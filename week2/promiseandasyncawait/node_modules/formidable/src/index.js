'use strict';

const PersistentFile = require('formidable/src/PersistentFile');
const VolatileFile = require('formidable/src/VolatileFile');
const Formidable = require('formidable/src/Formidable');
const FormidableError = require('formidable/src/FormidableError');

const plugins = require('formidable/src/plugins');
const parsers = require('formidable/src/parsers');

// make it available without requiring the `new` keyword
// if you want it access `const formidable.IncomingForm` as v1
const formidable = (...args) => new Formidable(...args);

module.exports = Object.assign(formidable, {
  errors: FormidableError,
  File: PersistentFile,
  PersistentFile,
  VolatileFile,
  Formidable,
  formidable,

  // alias
  IncomingForm: Formidable,

  // parsers
  ...parsers,
  parsers,

  // misc
  defaultOptions: Formidable.DEFAULT_OPTIONS,
  enabledPlugins: Formidable.DEFAULT_OPTIONS.enabledPlugins,

  // plugins
  plugins: {
    ...plugins,
  },
});
